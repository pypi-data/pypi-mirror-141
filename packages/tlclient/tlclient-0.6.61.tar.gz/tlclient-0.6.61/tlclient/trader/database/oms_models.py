# auto generated by update_py.py

from sqlalchemy import CHAR, Column, Integer, Index, BOOLEAN, text, TEXT, Enum, VARCHAR, JSON
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.dialects.mysql import DOUBLE, DATE, TINYINT, SMALLINT, DATETIME, MEDIUMTEXT, BIGINT, SMALLINT, DECIMAL


class Base:
    create_time = Column(DATETIME, nullable=False, server_default=text('CURRENT_TIMESTAMP'))  # 创建时间
    update_time = Column(DATETIME, nullable=False, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))  # 更新时间
    is_deleted = Column(BOOLEAN, nullable=False, server_default=text('FALSE'))  # 是否删除 默认不删除


# make this column at the end of every derived table
Base.create_time._creation_order = 9997
Base.update_time._creation_order = 9998
Base.is_deleted._creation_order = 9999
Base = declarative_base(cls=Base)


class Targets(Base):
    '''targets'''

    __tablename__ = 'targets'

    id = Column(Integer, primary_key=True, autoincrement=True)
    trading_day = Column(DATE, nullable=False)  # 交易日
    account = Column(VARCHAR(128), nullable=False)  # 交易账户 tg_name
    exchange = Column(VARCHAR(32), nullable=False)  # 交易所
    symbol = Column(VARCHAR(32), nullable=False)  # 证券代码
    target = Column(DOUBLE(asdecimal=False), nullable=False)  # 目标仓位
    label = Column(VARCHAR(128))  # 下单标记
    method = Column(VARCHAR(32), nullable=False)  # 下单算法
    params = Column(JSON)  # 下单参数 json 格式

    __table_args__ = (
        Index('idx_targets_trading_day', 'trading_day'),
        Index('idx_targets_account', 'account'),
    )


class OrderInfo(Base):
    '''order info'''

    __tablename__ = 'order_info'

    order_id = Column(VARCHAR(64), primary_key=True)  # order id
    order_ref = Column(VARCHAR(64))  # order ref
    label = Column(VARCHAR(32))  # label


class TradingDayList(Base):
    '''交易日列表'''

    __tablename__ = 'trading_day_list'

    trade_date = Column(DATE, primary_key=True)
