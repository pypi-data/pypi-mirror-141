{"hat-gateway": {"modbus.yaml": {"id": "hat-gateway://modbus.yaml#", "title": "Modbus devices", "definitions": {"master": {"type": "object", "title": "Modbus master", "required": ["connection", "remote_devices"], "properties": {"connection": {"type": "object", "required": ["modbus_type", "transport", "connect_timeout", "connect_delay", "request_timeout", "request_retry_count", "request_retry_delay"], "properties": {"modbus_type": {"description": "Modbus message encoding type\n", "enum": ["TCP", "RTU", "ASCII"]}, "transport": {"oneOf": [{"type": "object", "required": ["type", "host", "port"], "properties": {"type": {"const": "TCP"}, "host": {"type": "string", "description": "Remote host name\n"}, "port": {"type": "integer", "description": "Remote host TCP port\n", "default": 502}}}, {"type": "object", "required": ["type", "port", "baudrate", "bytesize", "parity", "stopbits", "flow_control", "silent_interval"], "properties": {"type": {"const": "SERIAL"}, "port": {"type": "string", "description": "Serial port name (e.g. /dev/ttyS0)\n"}, "baudrate": {"type": "integer", "description": "Baud rate (e.g. 9600)\n"}, "bytesize": {"description": "Number of data bits\n", "enum": ["FIVEBITS", "SIXBITS", "SEVENBITS", "EIGHTBITS"]}, "parity": {"description": "Parity checking\n", "enum": ["NONE", "EVEN", "ODD", "MARK", "SPACE"]}, "stopbits": {"description": "Number of stop bits\n", "enum": ["ONE", "ONE_POINT_FIVE", "TWO"]}, "flow_control": {"type": "object", "required": ["xonxoff", "rtscts", "dsrdtr"], "properties": {"xonxoff": {"type": "boolean", "description": "Enable software flow control\n"}, "rtscts": {"type": "boolean", "description": "Enable hardware (RTS/CTS) flow control\n"}, "dsrdtr": {"type": "boolean", "description": "Enable hardware (DSR/DTR) flow control\n"}}}, "silent_interval": {"type": "number", "description": "Serial communication silet interval\n"}}}]}, "connect_timeout": {"type": "number", "description": "Maximum number of seconds available to single connection\nattempt\n"}, "connect_delay": {"type": "number", "description": "Delay (in seconds) between two consecutive connection\nestablishment attempts\n"}, "request_timeout": {"type": "number", "description": "Maximum duration (in seconds) of read or write\nrequest/response exchange.\n"}, "request_retry_count": {"type": "integer", "description": "Number of request retries before remote data is considered\nunavailable\n"}, "request_retry_delay": {"type": "number", "description": "Delay (in seconds) between two consecutive request retries\n"}}}, "remote_devices": {"type": "array", "items": {"type": "object", "required": ["device_id", "data"], "properties": {"device_id": {"type": "integer", "description": "Modbus device identifier\n"}, "data": {"type": "array", "items": {"type": "object", "required": ["name", "interval", "data_type", "start_address", "bit_offset", "bit_count"], "properties": {"name": {"type": "string", "description": "Data point name\n"}, "interval": {"type": ["number", "null"], "description": "Polling interval in seconds or\nnull if polling is disabled\n"}, "data_type": {"description": "Modbus register type\n", "enum": ["COIL", "DISCRETE_INPUT", "HOLDING_REGISTER", "INPUT_REGISTER", "QUEUE"]}, "start_address": {"type": "integer", "description": "Starting address of modbus register\n"}, "bit_offset": {"type": "integer", "description": "Bit offset (number of bits skipped)\n"}, "bit_count": {"type": "integer", "description": "Number of bits used for\nencoding/decoding value (not\nincluding offset bits)\n"}}}}}}}}}}}, "main.yaml": {"id": "hat-gateway://main.yaml#", "title": "Gateway", "description": "Gateway's configuration", "allOf": [{"type": "object", "required": ["type", "log", "gateway_name", "devices"], "properties": {"type": {"enum": ["gateway"], "description": "configuration type identification"}, "version": {"type": "string", "description": "component version"}, "log": {"$ref": "hat-json://logging.yaml#"}, "gateway_name": {"type": "string"}, "devices": {"type": "array", "items": {"$ref": "hat-gateway://main.yaml#/definitions/device"}}}}, {"oneOf": [{"type": "object", "required": ["monitor", "event_server_group"], "properties": {"monitor": {"$ref": "hat-monitor://client.yaml#"}, "event_server_group": {"type": "string"}}}, {"type": "object", "required": ["event_server_address"], "properties": {"event_server_address": {"type": "string"}}}]}], "definitions": {"device": {"type": "object", "description": "structure of device configuration depends on device type\n", "required": ["module", "name"], "properties": {"module": {"type": "string", "description": "full python module name that implements device\n"}, "name": {"type": "string"}}}}}}}