(self.webpackChunkjupyter_scatter=self.webpackChunkjupyter_scatter||[]).push([[756,138],{10:(e,t,n)=>{e.exports=n(138),e.exports.version=n(306).version},756:(e,t,n)=>{const o=n(10),i=n(216),r=n(306).name;e.exports={id:"jupyter.extensions."+r,requires:[i.IJupyterWidgetRegistry],activate:function(e,t){t.registerWidget({name:r,version:o.version,exports:o})},autoStart:!0}},306:e=>{"use strict";e.exports=JSON.parse('{"name":"jupyter-scatter","version":"0.2.0","description":"A scatter plot extension for Jupyter Notebook and Lab","author":"Fritz Lekschas","main":"src/index.js","repository":{"type":"git","url":"https://github.com/flekschas/jupyter-scatter.git"},"license":"Apache-2.0","keywords":["scatter","scatter plot","jupyter","jupyterlab","jupyterlab-extension"],"files":["embed.js","extension.js","index.js","labplugin.js","src/**/*.js","dist/*.js"],"scripts":{"clean":"rimraf dist/ && rimraf ../jscatter/labextension/ && rimraf ../jscatter/nbextension","prepare":"npm run clean && npm run build:prod","build":"webpack --mode=development && npm run build:labextension:dev","build:prod":"webpack --mode=production && npm run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","watch":"webpack --watch --mode=development","test":"echo \\"Error: no test specified\\" && exit 1"},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4","camera-2d-simple":"~2.2.1","dom-2d-camera":"~1.2.3","gl-matrix":"^3.1.0","lodash":"^4.17.4","pub-sub-es":"~2.0.1","regl":"~2.1.0","regl-scatterplot":"^1.0.0"},"devDependencies":{"@jupyterlab/builder":"^3.0.8","css-loader":"^3.5.3","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","lint-staged":"^10.2.7","prettier":"^2.0.5","pretty-quick":"^2.0.1","rimraf":"^3.0.2","style-loader":"^1.2.1","webpack":"^5.18.0","webpack-cli":"^4.4.0"},"jupyterlab":{"extension":"labplugin","outputDir":"../jscatter/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')},472:e=>{const t={uint8:Uint8Array,int8:Int8Array,uint16:Uint16Array,int16:Int16Array,uint32:Uint32Array,int32:Int32Array,float32:Float32Array,float64:Float64Array};class n{constructor(e){if(!(e in t))throw Error(`Dtype not supported, got ${JSON.stringify(e)}.`);this.dtype=e}}e.exports={Numpy1D:class extends n{deserialize(e){return null==e?null:Array.from(new t[this.dtype](e.buffer.buffer))}serialize(e){return{data:new t[this.dtype](e).buffer,dtype:this.dtype,shape:[e.length]}}},Numpy2D:class extends n{deserialize(e){if(null==e)return null;const n=new t[this.dtype](e.buffer.buffer),[o,i]=e.shape;return Array.from({length:o}).map(((e,t)=>Array.from(n.subarray(t*i,(t+1)*i))))}serialize(e){const n=e.length,o=e[0].length,i=new t[this.dtype](n*o);for(let t=0;t<e.length;t++)i.set(e[t],t*n);return{data:i.buffer,dtype:this.dtype,shape:[n,o]}}}}},138:(e,t,n)=>{const o=n(216),i=n(423),r=n(472),a=n(306),s=i.default,l=o.DOMWidgetModel.extend({defaults:{...o.DOMWidgetModel.prototype.defaults(),_model_name:"JupyterScatterModel",_model_module:a.name,_model_module_version:a.version,_view_name:"JupyterScatterView",_view_module:a.name,_view_module_version:a.version}},{serializers:{...o.DOMWidgetModel.serializers,points:new r.Numpy2D("float32"),selection:new r.Numpy1D("uint32")}});function c(e){return e.replace(/[\w]([A-Z])/g,(function(e){return e[0]+"_"+e[1]})).toLowerCase()}const d={backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",cameraDistance:"cameraDistance",cameraRotation:"cameraRotation",cameraTarget:"cameraTarget",cameraView:"cameraView",color:"pointColor",colorActive:"pointColorActive",colorBy:"colorBy",colorHover:"pointColorHover",height:"height",lassoColor:"lassoColor",lassoInitiator:"lassoInitiator",lassoMinDelay:"lassoMinDelay",lassoMinDist:"lassoMinDist",mouseMode:"mouseMode",opacity:"opacity",opacityBy:"opacityBy",otherOptions:"otherOptions",points:"points",reticle:"showReticle",reticleColor:"reticleColor",selection:"selectedPoints",size:"pointSize",sizeBy:"sizeBy",connect:"showPointConnections",connectionColor:"pointConnectionColor",connectionColorActive:"pointConnectionColorActive",connectionColorHover:"pointConnectionColorHover",connectionColorBy:"pointConnectionColorBy",connectionOpacity:"pointConnectionOpacity",connectionOpacityBy:"pointConnectionOpacityBy",connectionSize:"pointConnectionSize",connectionSizeBy:"pointConnectionSizeBy",viewDownload:"viewDownload",viewReset:"viewReset",hovering:"hovering"},h=o.DOMWidgetView.extend({render:function(){var e=this;Object.keys(d).forEach((function(t){e[t]=e.model.get(c(t))})),this.height=this.model.get("height"),this.width=!Number.isNaN(+this.model.get("width"))&&+this.model.get("width")>0?+this.model.get("width"):"auto";var t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);this.model.set("dom_element_id",t),this.container=document.createElement("div"),this.container.setAttribute("id",t),this.container.style.position="relative",this.container.style.width="auto"===this.width?"100%":this.width+"px",this.container.style.height=this.height+"px",this.el.appendChild(this.container),this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),window.requestAnimationFrame((function(){const t={canvas:e.canvas};"auto"!==e.width&&(t.width=e.width),Object.entries(d).forEach((function(n){const o=n[0],i=n[1];null!==e[o]&&(t[i]=e[o])})),e.scatterplot=s(t),console.log("jscatter v"+a.version+" with regl-scatterplot v"+e.scatterplot.get("version")),e.container.api=e.scatterplot,e.pointoverHandlerBound=e.pointoverHandler.bind(e),e.pointoutHandlerBound=e.pointoutHandler.bind(e),e.selectHandlerBound=e.selectHandler.bind(e),e.deselectHandlerBound=e.deselectHandler.bind(e),e.scatterplot.subscribe("pointover",e.pointoverHandlerBound),e.scatterplot.subscribe("pointout",e.pointoutHandlerBound),e.scatterplot.subscribe("select",e.selectHandlerBound),e.scatterplot.subscribe("deselect",e.deselectHandlerBound),Object.keys(d).forEach((function(t){e[t+"Handler"]?e.model.on("change:"+c(t),e.withModelChangeHandler(t,e[t+"Handler"].bind(e)),e):console.warn("No handler for "+t)})),window.addEventListener("resize",e.resizeHandler.bind(e)),window.addEventListener("deviceorientation",e.resizeHandler.bind(e)),e.resizeHandler(),e.colorCanvas(),e.points.length&&e.scatterplot.draw(e.points).then((function(){e.selection.length&&e.scatterplot.select(e.selection,{preventEvent:!0})}))})),this.model.save_changes()},remove:function(){this.scatterplot.destroy()},colorCanvas:function(){Array.isArray(this.backgroundColor)?this.canvas.style.backgroundColor="rgb("+this.backgroundColor.slice(0,3).map((function(e){return 255*e})).join(",")+")":this.canvas.style.backgroundColor=this.backgroundColor},pointoverHandler:function(e){this.hoveringChangedByJs=!0,this.model.set("hovering",e),this.model.save_changes()},pointoutHandler:function(){this.hoveringChangedByJs=!0,this.model.set("hovering",null),this.model.save_changes()},selectHandler:function(e){this.selectionChangedByJs=!0,this.model.set("selection",[...e.points]),this.model.save_changes()},deselectHandler:function(){this.selectionChangedByJs=!0,this.model.set("selection",[]),this.model.save_changes()},pointsHandler:function(e){this.scatterplot.draw(e,{transition:!0,transitionDuration:3e3,transitionEasing:"quadInOut"})},selectionHandler:function(e){this.selectionChangedByJs?this.selectionChangedByJs=void 0:e&&e.length?this.scatterplot.select(e,{preventEvent:!0}):this.scatterplot.deselect({preventEvent:!0})},hoveringHandler:function(e){this.hoveringChangedByJs?this.hoveringChangedByJs=void 0:Number.isNaN(+e)?this.scatterplot.hover({preventEvent:!0}):this.scatterplot.hover(+e,{preventEvent:!0})},heightHandler:function(e){this.withPropertyChangeHandler("height",e),this.resizeHandler()},backgroundColorHandler:function(e){this.withPropertyChangeHandler("backgroundColor",e),this.colorCanvas()},backgroundImageHandler:function(e){this.withPropertyChangeHandler("backgroundImage",e)},lassoColorHandler:function(e){this.withPropertyChangeHandler("lassoColor",e)},lassoMinDelayHandler:function(e){this.withPropertyChangeHandler("lassoMinDelay",e)},lassoMinDistHandler:function(e){this.withPropertyChangeHandler("lassoMinDist",e)},colorHandler:function(e){this.withPropertyChangeHandler("pointColor",e)},colorActiveHandler:function(e){this.withPropertyChangeHandler("pointColorActive",e)},colorHoverHandler:function(e){this.withPropertyChangeHandler("pointColorHover",e)},colorByHandler:function(e){this.withPropertyChangeHandler("colorBy",e)},opacityHandler:function(e){this.withPropertyChangeHandler("opacity",e)},opacityByHandler:function(e){this.withPropertyChangeHandler("opacityBy",e)},sizeHandler:function(e){this.withPropertyChangeHandler("pointSize",e)},sizeByHandler:function(e){this.withPropertyChangeHandler("sizeBy",e)},connectHandler:function(e){this.withPropertyChangeHandler("showPointConnections",Boolean(e))},connectionColorHandler:function(e){this.withPropertyChangeHandler("pointConnectionColor",e)},connectionColorActiveHandler:function(e){this.withPropertyChangeHandler("pointConnectionColorActive",e)},connectionColorHoverHandler:function(e){this.withPropertyChangeHandler("pointConnectionColorHover",e)},connectionColorByHandler:function(e){this.withPropertyChangeHandler("pointConnectionColorBy",e)},connectionOpacityHandler:function(e){this.withPropertyChangeHandler("pointConnectionOpacity",e)},connectionOpacityByHandler:function(e){this.withPropertyChangeHandler("pointConnectionOpacityBy",e)},connectionSizeHandler:function(e){this.withPropertyChangeHandler("pointConnectionSize",e)},connectionSizeByHandler:function(e){this.withPropertyChangeHandler("pointConnectionSizeBy",e)},reticleHandler:function(e){this.withPropertyChangeHandler("showReticle",e)},reticleColorHandler:function(e){this.withPropertyChangeHandler("reticleColor",e)},cameraTargetHandler:function(e){this.withPropertyChangeHandler("cameraTarget",e)},cameraDistanceHandler:function(e){this.withPropertyChangeHandler("cameraDistance",e)},cameraRotationHandler:function(e){this.withPropertyChangeHandler("cameraRotation",e)},cameraViewHandler:function(e){this.withPropertyChangeHandler("cameraView",e)},lassoInitiatorHandler:function(e){this.withPropertyChangeHandler("lassoInitiator",e)},mouseModeHandler:function(e){this.withPropertyChangeHandler("mouseMode",e)},otherOptionsHandler:function(e){this.scatterplot.set(e)},viewDownloadHandler:function(e){if(!e)return;const t=this.scatterplot.export();if("property"===e)return this.model.set("view_pixels",Array.from(t.pixels)),this.model.set("view_shape",[t.width,t.height]),this.model.set("view_download",null),void this.model.save_changes();const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const o=n.getContext("2d");o.putImageData(new ImageData(t.pixels,t.width,t.height),0,0);const i=new Image;i.onload=()=>{o.clearRect(0,0,t.width,t.height),o.scale(1,-1),o.drawImage(i,0,-t.height),n.toBlob((e=>{!function(e,t){const n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="scatter.png",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(n)}(e),setTimeout((()=>{this.model.set("view_download",null),this.model.save_changes()}),0)}))},i.src=n.toDataURL()},viewResetHandler:function(){this.scatterplot.reset(),setTimeout((()=>{this.model.set("view_reset",!1),this.model.save_changes()}),0)},resizeHandler:function(){this.width=Math.max(240,this.el.getBoundingClientRect().width),this.container.style.height=this.height+"px",this.scatterplot.set({width:this.width,height:this.height})},withPropertyChangeHandler:function(e,t){var n={};n[e]=t,this.scatterplot.set(n)},withModelChangeHandler:function(e,t){var n=this;return function(){var o=n.model.changedAttributes();void 0!==o[c(e)]&&!0!==n[e+"Changed"]?(n[e]=o[c(e)],t&&t(n[e])):n[e+"Changed"]=!1}}});e.exports={JupyterScatterModel:l,JupyterScatterView:h}}}]);