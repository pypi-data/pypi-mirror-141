(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bfd4a9a"],{"06c5":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("fb6a"),i("d3b7"),i("b0c0"),i("a630"),i("3ca3"),i("ac1f"),i("00b4");var a=i("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a["a"])(t,e):void 0}}},1148:function(t,e,i){"use strict";var a=i("a691"),s=i("1d80");t.exports="".repeat||function(t){var e=String(s(this)),i="",n=a(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i}},"13da":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-performance-dashboard"},[a("div",{staticClass:"dashboard-item"},[a("div",{staticClass:"item-head"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.stepTrace")))]),a("div",{staticClass:"tip-icon"},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticClass:"tooltip-container",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"pro-dash-tooltip"},[a("div",{staticClass:"font-size-style"},[t._v(t._s(t.$t("profiling.features")))]),a("div",[t._v(t._s(t.$t("profiling.iterationInfo")))]),a("div",[a("span",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.queueInfo"))+" ")]),a("span",[t._v(t._s(t.$t("profiling.iterationGapInfo")))])]),a("div",[a("span",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.fpbpTitle"))+" ")]),a("span",[t._v(t._s(t.$t("profiling.fpbpInfo")))])]),a("div",[a("span",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.iterativeTailingTitle"))+" ")]),a("span",[t._v(t._s(t.$t("profiling.iterativeTailingInfo")))])]),a("br"),a("div",{staticClass:"font-size-style"},[t._v(t._s(t.$t("profiling.statistics")))]),a("div",[t._v(t._s(t.$t("profiling.totalTime"))+" "),a("span",[t._v(t._s(t.totalTime)+t._s(t.$t("profiling.millisecond")))])]),a("div",[t._v(t._s(t.$t("profiling.totalSteps"))),a("span",[t._v(t._s(t.totalSteps))])]),a("div",[t._v(t._s(t.$t("profiling.iterationGapTimeRatio"))),a("span",[t._v(t._s(t.iterationIntervalPercent))])]),t.fpBpPercent?a("div",[t._v(t._s(t.$t("profiling.fpbpTimeRatio"))),a("span",[t._v(t._s(t.fpBpPercent))])]):a("div",[t._v(t._s(t.$t("profiling.fpTimeRatio"))),a("span",[t._v(t._s(t.fpPercent))])]),t.tailPercent?a("div",[t._v(" "+t._s(t.$t("profiling.iterativeTailingTimeRatio"))+" "),a("span",[t._v(t._s(t.tailPercent))])]):t._e()])]),a("i",{staticClass:"el-icon-info"})])],1),a("div",{staticClass:"view-detail"},[a("button",{class:{disabled:t.svg.noData&&0===t.svg.data.length},attrs:{disabled:t.svg.noData&&0===t.svg.data.length},on:{click:function(e){return t.viewDetail("step-trace")}}},[t._v(t._s(t.$t("profiling.viewDetail"))+" "),a("i",{staticClass:"el-icon-d-arrow-right"})])])]),t.svg.noData?a("div",{staticClass:"image-noData"},[a("div",[a("img",{attrs:{src:i("9485"),alt:""}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.svg.initOver,expression:"!svg.initOver"}]},[t._v(t._s(t.$t("public.dataLoading")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.svg.initOver,expression:"svg.initOver"}]},[t._v(t._s(t.isHeterogeneous?t.$t("profiling.isHeterogeneous"):t.$t("public.noData")))])]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.svg.noData,expression:"!svg.noData"}],staticClass:"item-content step-trace"},[a("div",{staticClass:"training-trace",style:{height:t.svg.totalHeight+"px"},attrs:{id:"trace"}},[a("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%"}},[a("defs",[a("marker",{attrs:{id:"marker_end",refX:"5",refY:"4",markerWidth:"10",markerHeight:"8",orient:"auto"}},[a("path",{attrs:{d:"M1,1 L1,7 L9,4 z",fill:"#6c7280",stroke:"#6c7280"}})]),a("marker",{attrs:{id:"marker_start",refX:"5",refY:"4",markerWidth:"10",markerHeight:"8",orient:"auto"}},[a("path",{attrs:{d:"M9,1 L9,7 L1,4 z",fill:"#6c7280",stroke:"#6c7280"}})])])])])])]),a("div",{staticClass:"dashboard-item"},[a("div",{staticClass:"item-head"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.rankOfOperator")))]),a("div",{staticClass:"view-detail"},[a("button",{class:{disabled:t.pieChart.noData&&0===t.pieChart.data.length},attrs:{disabled:t.pieChart.noData&&0===t.pieChart.data.length},on:{click:function(e){return t.viewDetail("operator")}}},[t._v(t._s(t.$t("profiling.viewDetail"))+" "),a("i",{staticClass:"el-icon-d-arrow-right"})])])]),t.pieChart.noData?a("div",{staticClass:"image-noData"},[a("div",[a("img",{attrs:{src:i("9485"),alt:""}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.pieChart.initOver,expression:"!pieChart.initOver"}]},[t._v(t._s(t.$t("public.dataLoading")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.pieChart.initOver,expression:"pieChart.initOver"}]},[t._v(t._s(t.$t("public.noData")))])]):t._e(),t.pieChart.data.length?a("div",{staticClass:"item-content operator"},[a("div",[a("div",{staticClass:"pie-chart",attrs:{id:"pieChart"}}),t.pieChart.data.length?a("div",{staticClass:"time-list"},[a("ul",t._l(t.pieChart.topN,(function(e,i){return a("li",{key:i,staticClass:"item"},[a("span",{staticClass:"index",style:{"background-color":t.pieChart.colorList[i]}},[t._v(t._s(i+1))]),a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"num"},[t._v(t._s(e.frequency+t.$t("profiling.times")))]),a("span",{staticClass:"time"},[a("span",{staticClass:"bar",style:{width:e.time/t.pieChart.topN[0].time*100+"%"}}),a("span",{staticClass:"value"},[t._v(t._s(e.time+t.$t("profiling.unit")))])])])})),0)]):t._e()])]):t._e()]),a("div",{staticClass:"dashboard-item"},[a("div",{staticClass:"item-head"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.mindData")))]),a("div",{staticClass:"tip-icon"},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticClass:"tooltip-container",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"pro-dash-tooltip"},[a("div",{staticClass:"font-size-style"},[t._v(t._s(t.$t("profiling.features")))]),a("div",[t._v(t._s(t.$t("profiling.dataProcess")))]),a("div",[t._v(t._s(t.$t("profiling.dataProcessInfo")))]),a("div",[t._v(t._s(t.$t("profiling.analysisOne")))]),a("div",[t._v(t._s(t.$t("profiling.analysisTwo")))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.deviceInfoShow||t.queueInfoShow,expression:"deviceInfoShow || queueInfoShow"}]},[t._v(t._s(t.$t("profiling.higherAnalysis")))]),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:t.deviceInfoShow||t.queueInfoShow,expression:"deviceInfoShow || queueInfoShow"}],staticClass:"font-size-style"},[t._v(t._s(t.$t("profiling.statistics")))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.queueInfoShow,expression:"queueInfoShow"}]},[t._v(t._s(t.$t("profiling.chipInfo"))+" "),a("span",[t._v(t._s(t.processSummary.get_next.empty)+" / "+t._s(t.processSummary.get_next.total))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.deviceInfoShow,expression:"deviceInfoShow"}]},[a("div",[t._v(t._s(t.$t("profiling.hostIsEmpty"))+" "),a("span",[t._v(t._s(t.processSummary.device.empty)+" / "+t._s(t.processSummary.device.total))])]),a("div",[t._v(t._s(t.$t("profiling.hostIsFull"))+" "),a("span",[t._v(t._s(t.processSummary.device.full)+" / "+t._s(t.processSummary.device.total))])])])])]),a("i",{staticClass:"el-icon-info"})])],1),a("div",{staticClass:"view-detail"},[a("button",{class:{disabled:t.processSummary.noData},attrs:{disabled:t.processSummary.noData},on:{click:function(e){return t.viewDetail("data-process")}}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),a("i",{staticClass:"el-icon-d-arrow-right"})])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.processSummary.noData,expression:"!processSummary.noData"}],staticClass:"item-content data-prepare"},[a("div",{staticClass:"cell-container data-process"},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("profiling.pipeline"))+" ")])]),a("div",{staticClass:"queue-container"},[t._m(0),a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.connectorQuene")))]),a("div",{staticClass:"description"},[t.processSummary.device.empty||0===t.processSummary.device.empty?a("div",{staticClass:"item"},[t._v(" "+t._s(t.$t("profiling.queueTip2"))+" "),a("span",{staticClass:"num"},[t._v(" "+t._s(t.processSummary.device.empty)+" / "+t._s(t.processSummary.device.total)+" ")])]):t._e(),t.processSummary.device.full||0===t.processSummary.device.full?a("div",{staticClass:"item"},[t._v(" "+t._s(t.$t("profiling.queueTip1"))+" "),a("span",{staticClass:"num"},[t._v(" "+t._s(t.processSummary.device.full)+" / "+t._s(t.processSummary.device.total)+" ")])]):t._e()])]),a("div",{staticClass:"cell-container device_queue_op",attrs:{clickKey:"device_queue_op"}},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("profiling.deviceQueueOp"))+" ")])]),t.processSummary.count===t.processSummary.maxCount?a("div",{staticClass:"queue-container"},[t._m(1),a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.dataQueue")))]),a("div",{staticClass:"description"},[t.processSummary.get_next.empty||0===t.processSummary.get_next.empty?a("div",{staticClass:"item"},[t._v(" "+t._s(t.$t("profiling.queueTip2"))+" "),a("span",{staticClass:"num"},[t._v(" "+t._s(t.processSummary.get_next.empty)+" / "+t._s(t.processSummary.get_next.total)+" ")])]):t._e(),t.processSummary.get_next.full||0===t.processSummary.get_next.full?a("div",{staticClass:"item"},[t._v(" "+t._s(t.$t("profiling.queueTip1"))+" "),a("span",{staticClass:"num"},[t._v(" "+t._s(t.processSummary.get_next.full)+" / "+t._s(t.processSummary.get_next.total)+" ")])]):t._e()])]):t._e(),t.processSummary.count===t.processSummary.maxCount?a("div",{staticClass:"cell-container get-next",attrs:{clickKey:"get_next"}},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("profiling.getData"))+" ")])]):t._e()]),t.processSummary.noData?a("div",{staticClass:"image-noData"},[a("div",[a("img",{attrs:{src:i("9485"),alt:""}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.processSummary.initOver,expression:"!processSummary.initOver"}]},[t._v(t._s(t.$t("public.dataLoading")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.processSummary.initOver,expression:"processSummary.initOver"}]},[t._v(t._s(t.$t("public.noData")))])]):t._e()]),a("div",{staticClass:"dashboard-item"},[a("div",{staticClass:"item-head"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("profiling.timeLine")))]),a("div",{staticClass:"tip-icon"},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticClass:"tooltip-container",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"pro-dash-tooltip"},[a("div",{staticClass:"font-size-style"},[t._v(t._s(t.$t("profiling.features")))]),a("div",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.timelineTips.title1")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content11")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content12")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content13")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content14")))]),a("br"),a("div",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.timelineTips.title2")))]),a("div",[t._v(" "+t._s(t.$t("profiling.timelineTips.content21.part1"))+" "),a("b",[t._v(t._s(t.$t("profiling.timelineTips.content21.part2")))]),t._v(" "+t._s(t.$t("profiling.timelineTips.content21.part3"))+" ")]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content22")))]),a("div",[t._v(" "+t._s(t.$t("profiling.timelineTips.content23.part1"))+" "),a("b",[t._v(t._s(t.$t("profiling.timelineTips.content23.part2")))]),t._v(" "+t._s(t.$t("profiling.timelineTips.content23.part3"))+" "),a("b",[t._v(t._s(t.$t("profiling.timelineTips.content23.part4")))]),t._v(" "+t._s(t.$t("profiling.timelineTips.content23.part5"))+" "),a("b",[t._v(t._s(t.$t("profiling.timelineTips.content23.part6")))]),t._v(" "+t._s(t.$t("profiling.timelineTips.content23.part7"))+" ")]),a("br"),a("div",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.timelineTips.title3")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content31")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content32")))]),a("br"),a("div",{staticClass:"font-style"},[t._v(t._s(t.$t("profiling.timelineTips.title4")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content41")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content42")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content43")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content44")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content45")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content46")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content47")))]),a("div",[t._v(t._s(t.$t("profiling.timelineTips.content48")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content49")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content410")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content411")))]),a("div",{staticClass:"indent"},[t._v(t._s(t.$t("profiling.timelineTips.content412")))])])]),a("i",{staticClass:"el-icon-info"})])],1),a("div",{staticClass:"view-detail"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!t.timeLine.waiting,expression:"!timeLine.waiting"}],class:{disabled:t.timeLine.disable},attrs:{disabled:t.timeLine.disable},on:{click:function(e){return t.downloadTimelineFile()}}},[t._v(t._s(t.$t("profiling.downloadTimeline"))+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.timeLine.waiting,expression:"timeLine.waiting"}],staticClass:"el-icon-loading loading-icon"})])]),t.timelineInfo.noData?t._e():a("div",{staticClass:"item-content time-line"},[a("div",{staticClass:"info-line"},[a("span",[t._v(t._s(t.$t("profiling.scopeNameNum")))]),a("span",[a("el-select",{staticClass:"scope-name",attrs:{placeholder:t.$t("public.select")},on:{change:t.queryTimeline},model:{value:t.timelineInfo.scopeNameNum,callback:function(e){t.$set(t.timelineInfo,"scopeNameNum",e)},expression:"timelineInfo.scopeNameNum"}},t._l(t.timelineInfo.scopeNameNumArr,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("div",{staticClass:"info-line"},[a("span",[t._v(t._s(t.$t("profiling.opTotalTime")))]),a("span",[t._v(t._s(t.timelineInfo.totalTime)+"ms")])]),a("div",{staticClass:"info-line"},[a("span",[t._v(t._s(t.$t("profiling.streamNum")))]),a("span",[t._v(t._s(t.timelineInfo.streamNum))])]),a("div",{staticClass:"info-line"},[a("span",[t._v(t._s(t.$t("profiling.opNum")))]),a("span",[t._v(t._s(t.timelineInfo.opNum))])]),a("div",{staticClass:"info-line"},[a("span",[t._v(t._s(t.$t("profiling.opTimes")))]),a("span",[t._v(t._s(t.timelineInfo.opTimes+t.$t("profiling.times")))])])]),t.timelineInfo.noData?a("div",{staticClass:"image-noData"},[a("div",[a("img",{attrs:{src:i("9485"),alt:""}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.timelineInfo.initOver,expression:"!timelineInfo.initOver"}]},[t._v(t._s(t.$t("public.dataLoading")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.timelineInfo.initOver,expression:"timelineInfo.initOver"}]},[t._v(t._s(t.$t("public.noData")))])]):t._e()])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("div",{staticClass:"edge"},[a("img",{attrs:{src:i("7012"),alt:""}})]),a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("1b54"),alt:"",clickKey:"connector_queue"}})]),a("div",{staticClass:"edge"},[a("img",{attrs:{src:i("7012"),alt:""}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("div",{staticClass:"edge"},[a("img",{attrs:{src:i("7012"),alt:""}})]),a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("1b54"),clickKey:"data_queue",alt:""}})]),a("div",{staticClass:"edge"},[a("img",{attrs:{src:i("7012"),alt:""}})])])}],n=(i("e9c4"),i("b64b"),i("99af"),i("b0c0"),i("d3b7"),i("159b"),i("d81d"),i("fb6a"),i("cb29"),i("e260"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("2ca0"),i("ac1f"),i("5319"),i("9fac")),r=i("3778"),o=i("2dd7"),c=i("9944"),l={props:{rankID:String},data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},fpBpPercent:"--",fpPercent:"--",iterationIntervalPercent:"--",totalSteps:"--",totalTime:"--",tailPercent:"--",queueInfoShow:!1,deviceInfoShow:!1,svg:{data:[],svgPadding:20,totalWidth:0,totalTime:0,cellHeight:40,cellPadding:0,rowPadding:20,rowMargin:10,totalHeight:0,markerPadding:4,minRate:.1,minTime:0,minWidth:1,fontSize:12,textMargin:21,namespaceURI:"http://www.w3.org/2000/svg",resizeTimer:null,colors:{iteration_interval:[o["a"].stepTraceThemes[this.$store.state.themeIndex].reactIterationIntervalStroke,o["a"].stepTraceThemes[this.$store.state.themeIndex].reactIterationIntervalFill],fp_and_bp:[o["a"].stepTraceThemes[this.$store.state.themeIndex].reactFpAndBpstroke,o["a"].stepTraceThemes[this.$store.state.themeIndex].reactFpAndBpFill],tail:[o["a"].stepTraceThemes[this.$store.state.themeIndex].reactTailStroke,o["a"].stepTraceThemes[this.$store.state.themeIndex].reactTailFill],stream_parallel:["#01a5a7","#cceded"]},noData:!0,initOver:!1},pieChart:{chartDom:null,data:[],noData:!0,topN:[],colorList:o["a"].pieColorArr[this.$store.state.themeIndex],initOver:!1},timeLine:{data:null,waiting:!1,disable:!0},timelineInfo:{totalTime:0,streamNum:0,opNum:0,opTimes:0,noData:!0,initOver:!1,scopeNameNum:"",scopeNameNumArr:[]},processSummary:{noData:!0,count:6,maxCount:6,device:{empty:0,full:0,total:0},get_next:{empty:0,full:0,total:0},initOver:!1},themeIndex:this.$store.state.themeIndex,isHeterogeneous:!1}},mounted:function(){var t=this;window.addEventListener("resize",this.resizeTrace,!1),setTimeout((function(){t.$bus.$on("collapse",t.resizeTrace)}),500)},watch:{rankID:{handler:function(t){Object(c["b"])(t)?(this.svg.initOver=!1,this.pieChart.initOver=!1,this.timelineInfo.initOver=!1,this.processSummary.initOver=!1,this.init()):""===t&&(this.pieChart.noData=!0,this.svg.noData=!0,this.svg.initOver=!0,this.pieChart.initOver=!0,this.timelineInfo.initOver=!0,this.processSummary.initOver=!0,this.timeLine.waiting=!1)},immediate:!0}},methods:{init:function(){this.queryTimelineInfo(),this.queryTrainingTrace(),this.getProccessSummary(),this.initPieChart()},getProccessSummary:function(){var t=this,e={train_id:this.trainInfo.id,profile:this.trainInfo.dir,device_id:this.rankID};r["a"].queryProcessSummary(e).then((function(e){if(t.processSummary.initOver=!0,e&&e.data){var i=JSON.parse(JSON.stringify(e.data));t.processSummary.count=Object.keys(i).length,t.dealProcess(i)}else t.dealProcess(null),t.processSummary.initOver=!0}))},viewDetail:function(t){this.$emit("viewDetail",t)},setPieOption:function(){var t=this,e={tooltip:{trigger:"item",formatter:function(t){return"".concat(t.data.name,"<br>").concat(t.marker).concat(t.percent,"%")},confine:!0,extraCssText:"white-space:normal; word-break:break-word;"}};e.series=[{type:"pie",center:["50%","50%"],data:this.pieChart.data,radius:"80%",label:{show:!1,positionL:"inner"},itemStyle:{color:function(e){return o["a"].pieColorArr[t.$store.state.themeIndex][e.dataIndex]}}}],this.$nextTick((function(){var i=document.getElementById("pieChart");i?(t.pieChart.chartDom=n["a"].init(i,n["b"]),t.pieChart.chartDom.setOption(e,!0),t.pieChart.chartDom.resize()):t.pieChart.chartDom&&t.pieChart.chartDom.clear()}),10)},initPieChart:function(){var t=this,e={};e.params={profile:this.trainInfo.dir,train_id:this.trainInfo.id},e.body={op_type:"aicore_type",device_id:this.rankID,filter_condition:{},sort_condition:{name:"execution_time",type:"descending"}},r["a"].getProfilerOpData(e).then((function(e){t.pieChart.initOver=!0,e&&e.data&&e.data.object&&(t.pieChart.data=[],e.data.object.forEach((function(e){t.pieChart.data&&t.pieChart.data.length<5?t.pieChart.data.push({name:e[0],value:e[1],frequency:e[2],percent:e[3]}):(t.pieChart.data[5]||(t.pieChart.data[5]={name:"Other",value:0,percent:0}),t.pieChart.data[5].value+=e[1],t.pieChart.data[5].percent+=e[3])})),t.setPieOption(),t.pieChart.noData=!t.pieChart.data.length,t.pieChart.topN=t.pieChart.data.slice(0,Math.min(t.pieChart.data.length,5)).map((function(t){return{name:t.name,time:t.value,frequency:t.frequency}})))})).catch((function(){t.pieChart.data=[],t.pieChart.noData=!0,t.pieChart.initOver=!0}))},queryTrainingTrace:function(){var t=this,e={dir:this.trainInfo.path,type:0,device_id:this.rankID};r["a"].queryTrainingTrace(e).then((function(e){t.svg.initOver=!0,t.isHeterogeneous=e.data.is_heterogeneous,e&&e.data&&e.data.training_trace_graph&&e.data.training_trace_graph.length?(t.svg.noData=!1,t.removeTrace(),t.$nextTick((function(){t.packageTraceData(JSON.parse(JSON.stringify(e.data.training_trace_graph)))})),e.data.summary?(t.fpBpPercent=e.data.summary.fp_and_bp_percent,t.fpPercent=e.data.summary.fp_percent,t.iterationIntervalPercent=e.data.summary.iteration_interval_percent,t.totalSteps=e.data.summary.total_steps,t.totalTime=e.data.summary.total_time,t.tailPercent=e.data.summary.tail_percent):(t.fpBpPercent="--",t.iterationIntervalPercent="--",t.totalSteps="--",t.totalTime="--",t.tailPercent="--")):(t.svg.totalHeight=0,t.svg.noData=!0,t.svg.data=[],t.removeTrace())}),(function(e){t.svg.totalHeight=0,t.svg.noData=!0,t.svg.data=[],t.svg.initOver=!0,t.removeTrace(),t.fpBpPercent="--",t.iterationIntervalPercent="--",t.totalSteps="--",t.totalTime="--",t.tailPercent="--",t.isHeterogeneous=!1}))},packageTraceData:function(t){var e=this;this.svg.totalTime=0,this.svg.minTime=0,this.svg.totalHeight=0;var i=[];t&&t[0]&&t[0][0]&&(this.svg.totalTime=t[0][0].duration,this.svg.minTime=this.svg.minRate*this.svg.totalTime,t.forEach((function(t,a){for(var s={rowCount:0,data:[],height:0,startY:e.svg.totalHeight},n=[],r=0;r<t.length;r++)t[r].duration<e.svg.minTime?(n.length&&(s.data.push(n),n=[],s.rowCount++),s.data.push([t[r]]),s.rowCount++):n.push(t[r]),r===t.length-1&&n.length&&(s.data.push(n),n=[],s.rowCount++);s.height=s.rowCount*e.svg.cellHeight+(s.rowCount-1)*e.svg.cellPadding+(a?2*e.svg.rowPadding:0),e.svg.totalHeight+=s.height+e.svg.rowMargin,i.push(s)})),this.svg.totalHeight+=this.svg.rowPadding,this.svg.data=JSON.parse(JSON.stringify(i)),this.$nextTick((function(){e.dealTraceData()})))},dealTraceData:function(){var t=this,e=document.querySelector("#trace");if(e)if(this.svg.totalWidth=e.offsetWidth-2*this.svg.svgPadding,this.svg.data[0]&&this.svg.data[0].data.length){var i=e.querySelector("svg");this.svg.totalTime&&this.svg.data.forEach((function(e,a){var s={};s=a?t.createMultipleRowContainer(e):t.createRowContainer(e.data,e.startY),i.appendChild(s)}))}else this.removeTrace()},createMultipleRowContainer:function(t){var e=document.createElementNS(this.svg.namespaceURI,"g");e.setAttribute("class","container");var i=document.createElementNS(this.svg.namespaceURI,"rect");i.setAttribute("x",this.svg.svgPadding),i.setAttribute("y",t.startY+this.svg.rowPadding),i.setAttribute("height",t.height),i.setAttribute("width",this.svg.totalWidth),i.setAttribute("style","fill:".concat(o["a"].stepTraceThemes[this.$store.state.themeIndex].reactContainerFill,";stroke:").concat(o["a"].stepTraceThemes[this.$store.state.themeIndex].reactContainerStroke,";stroke-width:1")),e.appendChild(i);var a=this.createRowContainer(t.data,t.startY+this.svg.rowPadding);return e.appendChild(a),e},createRowContainer:function(t,e){var i=this,a=document.createElementNS(this.svg.namespaceURI,"g");return t.forEach((function(t,s){var n=e+i.svg.rowPadding+s*(i.svg.cellPadding+i.svg.cellHeight);t.forEach((function(t){var e;t.duration&&(t.name?(e=i.createRect(t,n),a.insertBefore(e,a.querySelector("g"))):(e=i.createArrow(t,n),a.appendChild(e)))}))})),a},createRect:function(t,e){var i=t.name&&this.svg.colors[t.name]?this.svg.colors[t.name]:this.svg.colors.stream_parallel,a=t.start/this.svg.totalTime*this.svg.totalWidth+this.svg.svgPadding,s=Math.max(this.svg.minWidth,t.duration/this.svg.totalTime*this.svg.totalWidth),n="";switch(t.name){case"iteration_interval":n=this.$t("profiling.iterationGap");break;case"fp_and_bp":n=this.$t("profiling.deviceQueueOpTip");break;case"fp":n=this.$t("profiling.deviceQueueOpFpTip");break;case"tail":n=this.$t("profiling.iterationTail");break;default:n=t.name;break}var r="".concat(n,": ").concat(this.toFixedFun(t.duration,4),"ms"),o=this.getTextWidth(r),c=t.duration>=this.svg.minTime,l=document.createElementNS(this.svg.namespaceURI,"g");l.setAttribute("class","rect");var d=document.createElementNS(this.svg.namespaceURI,"rect");d.setAttribute("x",a),d.setAttribute("y",e),d.setAttribute("height",this.svg.cellHeight),d.setAttribute("width",s),d.setAttribute("style","fill:".concat(i[1],";stroke:").concat(i[0],";"));var m=document.createElementNS(this.svg.namespaceURI,"foreignObject");m.textContent=r,m.setAttribute("x",c?a:Math.min(2*this.svg.svgPadding+this.svg.totalWidth-o-this.svg.textMargin,Math.max(this.svg.textMargin,a+s/2-o/2))),m.setAttribute("y",e),m.setAttribute("height",this.svg.cellHeight),m.setAttribute("width",s),m.setAttribute("style","color:".concat(i[0])),m.setAttribute("class","content".concat(c?"":" content-mini"));var v=document.createElementNS(this.svg.namespaceURI,"title");return v.textContent=r,l.appendChild(d),l.appendChild(m),l.appendChild(v),l},createArrow:function(t,e){var i=t.duration/this.svg.totalTime*this.svg.totalWidth,a=t.start/this.svg.totalTime*this.svg.totalWidth+this.svg.svgPadding,s=e+this.svg.cellHeight/2,n=document.createElementNS(this.svg.namespaceURI,"g");n.setAttribute("class","arrow");var r=document.createElementNS(this.svg.namespaceURI,"line");r.setAttribute("y1",s),r.setAttribute("y2",s),r.setAttribute("style","stroke:#6c7280;stroke-width:1"),i>this.svg.markerPadding?(r.setAttribute("x1",a+this.svg.markerPadding),r.setAttribute("x2",a+i-this.svg.markerPadding),r.setAttribute("marker-end","url(#marker_end)"),r.setAttribute("marker-start","url(#marker_start)")):(r.setAttribute("x1",a),r.setAttribute("x2",a+i));var c=document.createElementNS(this.svg.namespaceURI,"text");c.textContent="".concat(t.duration===this.svg.totalTime?this.$t("profiling.approximateTime"):"").concat(this.toFixedFun(t.duration,4),"ms");var l=c.textContent?this.getTextWidth(c.textContent):0;c.setAttribute("x",Math.min(2*this.svg.svgPadding+this.svg.totalWidth-l-this.svg.textMargin,Math.max(this.svg.textMargin,i/2+a-l/2))),c.setAttribute("y",s-this.svg.fontSize/2),c.setAttribute("font-size",this.svg.fontSize),c.setAttribute("fill",o["a"].stepTraceThemes[this.themeIndex].reactFontColor);var d=document.createElementNS(this.svg.namespaceURI,"line");d.setAttribute("x1",a),d.setAttribute("y1",e),d.setAttribute("x2",a),d.setAttribute("y2",e+this.svg.cellHeight),d.setAttribute("style","stroke:#6c7280;stroke-width:1"),n.appendChild(d);var m=document.createElementNS(this.svg.namespaceURI,"line");return m.setAttribute("x1",a+i),m.setAttribute("y1",e),m.setAttribute("x2",a+i),m.setAttribute("y2",e+this.svg.cellHeight),m.setAttribute("style","stroke:#6c7280;stroke-width:1"),n.appendChild(m),n.appendChild(r),n.appendChild(c),n},getTextWidth:function(t){var e=document.querySelector("body"),i=document.createElement("span");i.style["font-size"]="12px",i.textContent=t,e.appendChild(i);var a=i.offsetWidth;return e.removeChild(i),a},removeTrace:function(){var t=document.querySelector("#trace svg");if(t){var e=t.children;if(e)for(var i=0;i<e.length;i++)"g"===e[i].nodeName&&t.removeChild(e[i--])}},resizeTrace:function(){var t=this;this.svg.resizeTimer&&clearTimeout(this.svg.resizeTimer),this.svg.resizeTimer=setTimeout((function(){t.removeTrace(),t.dealTraceData(),t.svg.resizeTimer=null}),500)},queryTimelineInfo:function(){var t=this,e={dir:this.trainInfo.path,device_id:this.rankID};r["a"].queryTimelineInfo(e).then((function(e){t.timelineInfo.initOver=!0,e&&e.data?(t.timelineInfo.noData=!1,t.timelineInfo.totalTime=t.toFixedFun(e.data.total_time,4)||(0===e.data.total_time?0:"--"),t.timelineInfo.streamNum=e.data.num_of_streams||(0===e.data.num_of_streams?0:"--"),t.timelineInfo.opNum=e.data.num_of_ops||(0===e.data.num_of_ops?0:"--"),t.timelineInfo.opTimes=e.data.op_exe_times||(0===e.data.op_exe_times?0:"--"),e.data.max_scope_name_num>=0?(t.timelineInfo.scopeNameNum=e.data.max_scope_name_num,t.timelineInfo.scopeNameNumArr=Array(e.data.max_scope_name_num+1).fill().map((function(t,e){return{label:e,value:e}})),t.queryTimeline()):t.timeLine.disable=!0):(t.timelineInfo.noData=!0,t.timeLine.disable=!0)})).catch((function(){t.timelineInfo.noData=!0,t.timelineInfo.initOver=!0,t.timeLine.disable=!0}))},queryTimeline:function(){var t=this;this.timeLine.waiting=!0,this.timeLine.disable=!0;var e={dir:this.trainInfo.path,device_id:this.rankID,scope_name_num:this.timelineInfo.scopeNameNum};r["a"].queryTimeline(e).then((function(e){t.timeLine.waiting=!1,e&&e.data&&e.data.length&&(t.timeLine.data=JSON.stringify(e.data),t.timeLine.disable=!1)})).catch((function(){t.timeLine.waiting=!1}))},downloadTimelineFile:function(){var t=document.createElement("a");t.download=this.getDocName(),t.style.display="none";var e=new Blob([this.timeLine.data]);t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)},dealProcess:function(t){this.processSummary.device={empty:0,full:0,total:0},this.processSummary.get_next={empty:0,full:0,total:0},this.processSummary.noData=!0,t&&Object.keys(t).length&&(t.device_queue_info&&t.device_queue_info.summary&&(this.deviceInfoShow=!0,this.processSummary.device={empty:t.device_queue_info.summary.empty_batch_count,full:t.device_queue_info.summary.total_batch-t.device_queue_info.summary.empty_batch_count,total:t.device_queue_info.summary.total_batch}),t.get_next_queue_info&&t.get_next_queue_info.summary&&(this.queueInfoShow=!0,this.processSummary.get_next={empty:t.get_next_queue_info.summary.empty_batch_count,full:t.get_next_queue_info.summary.total_batch-t.get_next_queue_info.summary.empty_batch_count,total:t.get_next_queue_info.summary.total_batch}),this.processSummary.noData=!1)},getDocName:function(){var t=function(t){var e=t<10?"0":"";return e+t},e="./",i=this.trainInfo.dir;i===e&&(i=" "),i.startsWith(e)&&(i=i.replace(e,""));var a=new Date,s=a.getFullYear(),n=t(a.getMonth()+1),r=t(a.getDate()),o=t(a.getHours()),c=t(a.getMinutes()),l=t(a.getSeconds()),d=a.getMilliseconds(),m="".concat(s).concat(n).concat(r).concat(o).concat(c).concat(l).concat(d);return"timeline_".concat(i,"_").concat(this.rankID,"_scope-num-").concat(this.timelineInfo.scopeNameNum,"_").concat(m,".json")},toFixedFun:function(t,e){return isNaN(t)||isNaN(e)||!t||!e?t:Math.round(t*Math.pow(10,e))/Math.pow(10,e)}},destroyed:function(){window.removeEventListener("resize",this.resizeTrace,!1),this.$bus.$off("collapse")}},d=l,m=(i("2693"),i("4435"),i("2877")),v=Object(m["a"])(d,a,s,!1,null,"881bf4fe",null);e["default"]=v.exports},2693:function(t,e,i){"use strict";i("9405")},3835:function(t,e,i){"use strict";function a(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return o}));i("e01a"),i("d3b7"),i("d28b"),i("e260"),i("3ca3"),i("ddb0");function s(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,s,n=[],r=!0,o=!1;try{for(i=i.call(t);!(r=(a=i.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(c){o=!0,s=c}finally{try{r||null==i["return"]||i["return"]()}finally{if(o)throw s}}return n}}var n=i("06c5");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return a(t)||s(t,e)||Object(n["a"])(t,e)||r()}},"408a":function(t,e,i){var a=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},4435:function(t,e,i){"use strict";i("a886")},"5e89":function(t,e,i){var a=i("861d"),s=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&s(t)===t}},"6b75":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},"81d5":function(t,e,i){"use strict";var a=i("7b0b"),s=i("23cb"),n=i("50c4");t.exports=function(t){var e=a(this),i=n(e.length),r=arguments.length,o=s(r>1?arguments[1]:void 0,i),c=r>2?arguments[2]:void 0,l=void 0===c?i:s(c,i);while(l>o)e[o++]=t;return e}},"8ba4":function(t,e,i){var a=i("23e7"),s=i("5e89");a({target:"Number",stat:!0},{isInteger:s})},9405:function(t,e,i){},9944:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return o}));var a=i("3835");i("caad"),i("2532"),i("ac1f"),i("466d"),i("99af"),i("d3b7"),i("25f0"),i("b680"),i("8ba4"),i("a9e3");function s(t,e,i){t.toLowerCase().includes("rgb")||(t=n(t)),e.toLowerCase().includes("rgb")||(e=n(e));for(var s=t.match(/[0-9]\d*/g),r=Object(a["a"])(s,3),o=r[0],c=r[1],l=r[2],d=e.match(/[0-9]\d*/g),m=Object(a["a"])(d,3),v=m[0],p=m[1],u=m[2],h=(+v-+o)/i,f=(+p-+c)/i,g=(+u-+l)/i,_=[t],b=1;b<i;b++){var y=parseInt(h*b+ +o),C=parseInt(f*b+ +c),w=parseInt(g*b+ +l);_.push("rgb(".concat(y,",").concat(C,",").concat(w,")"))}return _}function n(t){var e=16;return 4===t.length?"rgb(".concat(parseInt(t[1]+t[1],e),", ").concat(parseInt(t[2]+t[2],e),", ").concat(parseInt(t[3]+t[3],e),")"):"rgb(".concat(parseInt(t[1]+t[2],e),", ").concat(parseInt(t[3]+t[4],e),", ").concat(parseInt(t[5]+t[6],e),")")}function r(t,e){if("number"!==typeof t&&(t=parseFloat(t)),isNaN(t))return"NaN";var i=t+"",a=i.indexOf(".");return a<0||i.length-a-1<=e?i:t.toFixed(e)}function o(t){if(Number.isInteger(t))return!0;if("string"!==typeof t)return!1;var e=+t;return e+""===t&&Number.isInteger(e)}},a630:function(t,e,i){var a=i("23e7"),s=i("4df4"),n=i("1c7e"),r=!n((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:r},{from:s})},a886:function(t,e,i){},b680:function(t,e,i){"use strict";var a=i("23e7"),s=i("a691"),n=i("408a"),r=i("1148"),o=i("d039"),c=1..toFixed,l=Math.floor,d=function(t,e,i){return 0===e?i:e%2===1?d(t,e-1,i*t):d(t*t,e/2,i)},m=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));a({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,i,a,o,c=n(this),v=s(t),p=[0,0,0,0,0,0],u="",h="0",f=function(t,e){var i=-1,a=e;while(++i<6)a+=t*p[i],p[i]=a%1e7,a=l(a/1e7)},g=function(t){var e=6,i=0;while(--e>=0)i+=p[e],p[e]=l(i/t),i=i%t*1e7},_=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var i=String(p[t]);e=""===e?i:e+r.call("0",7-i.length)+i}return e};if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(u="-",c=-c),c>1e-21)if(e=m(c*d(2,69,1))-69,i=e<0?c*d(2,-e,1):c/d(2,e,1),i*=4503599627370496,e=52-e,e>0){f(0,i),a=v;while(a>=7)f(1e7,0),a-=7;f(d(10,a,1),0),a=e-1;while(a>=23)g(1<<23),a-=23;g(1<<a),f(1,1),g(2),h=_()}else f(0,i),f(1<<-e,0),h=_()+r.call("0",v);return v>0?(o=h.length,h=u+(o<=v?"0."+r.call("0",v-o)+h:h.slice(0,o-v)+"."+h.slice(o-v))):h=u+h,h}})},cb29:function(t,e,i){var a=i("23e7"),s=i("81d5"),n=i("44d2");a({target:"Array",proto:!0},{fill:s}),n("fill")},d28b:function(t,e,i){var a=i("746f");a("iterator")},d81d:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").map,n=i("1dde"),r=i("ae40"),o=n("map"),c=r("map");a({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,i){"use strict";var a=i("23e7"),s=i("83ab"),n=i("da84"),r=i("5135"),o=i("861d"),c=i("9bf2").f,l=i("e893"),d=n.Symbol;if(s&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var m={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof v?new d(t):void 0===t?d():d(t);return""===t&&(m[e]=!0),e};l(v,d);var p=v.prototype=d.prototype;p.constructor=v;var u=p.toString,h="Symbol(test)"==String(d("test")),f=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=u.call(t);if(r(m,t))return"";var i=h?e.slice(7,-1):e.replace(f,"$1");return""===i?void 0:i}}),a({global:!0,forced:!0},{Symbol:v})}},fb6a:function(t,e,i){"use strict";var a=i("23e7"),s=i("861d"),n=i("e8b5"),r=i("23cb"),o=i("50c4"),c=i("fc6a"),l=i("8418"),d=i("b622"),m=i("1dde"),v=i("ae40"),p=m("slice"),u=v("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),f=[].slice,g=Math.max;a({target:"Array",proto:!0,forced:!p||!u},{slice:function(t,e){var i,a,d,m=c(this),v=o(m.length),p=r(t,v),u=r(void 0===e?v:e,v);if(n(m)&&(i=m.constructor,"function"!=typeof i||i!==Array&&!n(i.prototype)?s(i)&&(i=i[h],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return f.call(m,p,u);for(a=new(void 0===i?Array:i)(g(u-p,0)),d=0;p<u;p++,d++)p in m&&l(a,d,m[p]);return a.length=d,a}})}}]);