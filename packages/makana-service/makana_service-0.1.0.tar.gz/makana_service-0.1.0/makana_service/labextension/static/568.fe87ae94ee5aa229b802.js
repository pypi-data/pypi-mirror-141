"use strict";(self.webpackChunkmakana_service=self.webpackChunkmakana_service||[]).push([[568],{568:(e,t,n)=>{n.r(t),n.d(t,{ButtonExtension:()=>u,default:()=>v});var a=n(129),o=n(56),i=n(706);let d;var l;let c,p,r,s;const m={activate:function(e){e.docRegistry.addWidgetExtension("Notebook",new u)},id:"makana-service",autoStart:!0};class u{createNew(e,t){const n=e.translator.load("jupyterlab"),i=o.Dialog.okButton({label:n.__("Save")});var d=new URLSearchParams;d.append("client_id","makana_api"),d.append("grant_type","client_credentials"),d.append("scope","makanaapp_api"),d.append("client_secret","TAxhx@9tH(l^MgQ9FWE8}T@NWUT9U)"),fetch("https://makana-app-staging-wa.azurewebsites.net/connect/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d}).then((e=>e.json())).then((e=>{fetch("https://makana-app-staging-wa.azurewebsites.net/api/makana/models",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.access_token}}).then((e=>e.json())).then((e=>{console.log(e),l=e}))})).catch((e=>{console.error("Error:",e)}));const c=new o.ToolbarButton({className:"clear-output-button",label:"Register New Service",onClick:()=>{(0,o.showDialog)({title:"Register New Service",body:new h,buttons:[o.Dialog.cancelButton(),i]}).catch((e=>console.log(e)))},tooltip:"Register a New Service"});return e.toolbar.insertItem(10,"registerService",c),new a.DisposableDelegate((()=>{c.dispose()}))}}class h extends i.Widget{constructor(){super({node:b()})}getValue(){var e=document.getElementById("serviceName").value,t=document.getElementById("desinput").value,n=document.getElementById("model").value,a=document.getElementById("container").value,o=new FormData;if(o.append("id",""),o.append("name",e),o.append("description",t),o.append("modelDefinitionId",n),o.append("containerRunMode",a),0==s){var i=document.getElementById("idleTimeUnit").value;console.log(i),o.append("idleTimeUnit",i.toString())}if(0==r){var l=document.getElementById("idleTimeDuration").value;console.log(l),o.append("idleTimeDuration",l.toString())}return o.append("scriptFileName",c[0].name),o.append("scriptFileUri",""),o.append("scriptFile",c[0]),o.append("dependenciesFileName",p[0].name),o.append("dependenciesFileUri",""),o.append("dependenciesFile",p[0]),o.append("status",""),fetch("https://localhost:44350/api/makana/modelservices",{method:"POST",headers:{Authorization:"Bearer "+d},body:o}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.error("Error",e)})),this.node.value}}function b(){var e=new URLSearchParams;e.append("client_id","makana_api"),e.append("grant_type","client_credentials"),e.append("scope","makanaapp_api"),e.append("client_secret","TAxhx@9tH(l^MgQ9FWE8}T@NWUT9U)"),fetch("https://localhost:44350/connect/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((e=>e.json())).then((e=>{d=e.access_token}));const t=document.createElement("select");t.setAttribute("id","model");const n=document.createElement("div");n.id="div",n.className="form-control";const a=document.createElement("label");a.append("Service Name: ");const o=document.createElement("input");o.setAttribute("class","row"),o.placeholder="Enter Service Name",o.id="serviceName",o.style.borderLeftWidth="5px";const i=document.createElement("label");i.append("Description: ");const m=document.createElement("input");m.id="desinput",m.placeholder="Enter description",m.style.borderLeftWidth="5px";const u=document.createElement("label");u.append("Model: "),l.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.text=e.name,t.appendChild(n)})),t.setAttribute("class","form-control"),t.style.borderLeftWidth="5px";const h=document.createElement("label");h.append("Container Run Mode: ");const b=document.createElement("select");b.id="container";const v=document.createElement("option");v.value="0",v.text="Continuous",b.appendChild(v);const E=document.createElement("option");E.value="1",E.text="On Demand",b.appendChild(E),b.style.borderLeftWidth="5px";const g=document.createElement("div"),y=document.createElement("label");y.append("Idel Time: ");const f=document.createElement("input");f.setAttribute("type","number"),f.setAttribute("min","1"),f.setAttribute("max","100"),f.style.borderLeftWidth="5px",f.id="idleTimeDuration";const C=document.createElement("select");C.id="idleTimeUnit";const w=document.createElement("option");w.value="0",w.text="Minutes";const x=document.createElement("option");x.value="1",x.text="Hours";const k=document.createElement("option");k.value="2",k.text="Days",C.style.borderLeftWidth="5px",C.style.inlineSize="fit-content",C.appendChild(w),C.appendChild(x),C.appendChild(k),g.appendChild(y),g.appendChild(f).appendChild(C);const T=document.createElement("label");T.append("Script File: ");const _=document.createElement("INPUT");_.setAttribute("type","file"),_.id="script",_.style.borderLeftWidth="5px";const S=document.createElement("label");S.append("Dependencies File: ");const N=document.createElement("input");return N.setAttribute("type","file"),N.id="dependFile",N.style.borderLeftWidth="5px",n.appendChild(a),n.appendChild(o),n.appendChild(i),n.appendChild(m),n.appendChild(u).appendChild(t),n.appendChild(h).appendChild(b),n.appendChild(g),n.appendChild(T),n.appendChild(_),n.appendChild(S),n.appendChild(N),b.onchange=function(){"1"!=document.getElementById("container").value?g.style.visibility="hidden":(g.style.visibility="visible",s=0,r=0)},_.onchange=function(e){const t=e.target;c=t.files},N.onchange=function(e){const t=e.target;p=t.files},n}const v=m}}]);