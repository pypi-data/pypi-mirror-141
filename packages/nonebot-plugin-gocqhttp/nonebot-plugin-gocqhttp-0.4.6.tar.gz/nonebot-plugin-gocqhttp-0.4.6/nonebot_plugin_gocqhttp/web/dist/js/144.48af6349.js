"use strict";(self["webpackChunknonebot_plugin_gocqhttp_frontend"]=self["webpackChunknonebot_plugin_gocqhttp_frontend"]||[]).push([[144],{7144:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ye});var o=l(3673),n=l(2323),a=l(1959);const u={class:"text-center"},i=(0,o._)("div",{class:"text-body1"},"CPU",-1),r={class:"text-body2"},s=(0,o._)("strong",null,"PID:",-1),c=(0,o._)("strong",null,"内存:",-1),d=(0,o._)("strong",null,"启动时间:",-1),p=(0,o.aZ)({props:{status:{type:Object,required:!0}},setup(e){return(t,l)=>{var a,p;const v=(0,o.up)("q-icon"),m=(0,o.up)("q-circular-progress"),f=(0,o.up)("q-avatar"),w=(0,o.up)("q-chip");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",null,[(0,o.Wm)(m,{"show-value":"",value:null===(a=e.status)||void 0===a?void 0:a.cpu_percent,"track-color":t.$q.dark.isActive?"grey-8":"grey-3",thickness:.1,size:"90px",color:"blue",class:"q-ma-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{name:"developer_board",color:"accent",size:"30px"})])),_:1},8,["value","track-color","thickness"]),i,(0,o._)("code",r,(0,n.zw)(null===(p=e.status)||void 0===p?void 0:p.cpu_percent)+"%",1)]),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>{var t;return[(0,o.Wm)(f,{color:"blue",icon:"account_tree"}),s,(0,o._)("code",null,(0,n.zw)(null===(t=e.status)||void 0===t?void 0:t.pid),1)]})),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>{var t,l;return[(0,o.Wm)(f,{color:"yellow",icon:"memory"}),c,(0,o._)("code",null,(0,n.zw)(((null!==(l=null===(t=e.status)||void 0===t?void 0:t.memory_used)&&void 0!==l?l:0)/Math.pow(1024,2)).toFixed(2))+"MB",1)]})),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>{var t,l;return[(0,o.Wm)(f,{color:"green",icon:"timer"}),d,(0,o._)("code",null,(0,n.zw)(new Date(1e3*(null!==(l=null===(t=e.status)||void 0===t?void 0:t.start_time)&&void 0!==l?l:0)).toLocaleString()),1)]})),_:1})])}}});var v=l(6122),m=l(4554),f=l(7030),w=l(5096),_=l(7518),g=l.n(_);const h=p,y=h;g()(p,"components",{QCircularProgress:v.Z,QIcon:m.Z,QChip:f.Z,QAvatar:w.Z});var W=l(2381),q=l(6643),k=l.n(q),b=function(e,t,l,o){function n(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function u(e){try{r(o.next(e))}catch(t){a(t)}}function i(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?l(e.value):n(e.value).then(u,i)}r((o=o.apply(e,t||[])).next())}))};const Z={key:0,class:"timestamp"},Q={key:1,class:"level"},U=["innerHTML"],P=(0,o.aZ)({props:{logs:{type:Array,default:()=>[]}},setup(e){const t=e,l="当前版本:",u=new(k()),i=(0,a.iH)();function r(e){const t=u.ansi_to_html(e.message);return t}function s(e){switch(e.level){case W.dJ.Debug:return"level-debug";case W.dJ.Info:return"level-info";case W.dJ.Warning:return"level-warn";case W.dJ.Error:return"level-error";case W.dJ.Fatal:return"level-fatal";default:return"stdout"}}return(0,o.YP)((()=>t.logs.length),(()=>b(this,void 0,void 0,(function*(){var e,t;const l=null===(t=null===(e=i.value)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement;if(!l)return;const{scrollTop:n,clientHeight:a,scrollHeight:u}=l;Math.abs(n+a-u)<=1&&(yield(0,o.Y3)(),l.scrollTop=u)})))),(t,a)=>{const u=(0,o.up)("q-scroll-area");return(0,o.wg)(),(0,o.j4)(u,{class:"page-logs"},{default:(0,o.w5)((()=>[(0,o._)("div",{ref_key:"root",ref:i,class:"logs rounded-borders"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.logs,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["line",{start:e.message.startsWith(l)}]),key:e.time},[e.time?((0,o.wg)(),(0,o.iD)("code",Z,(0,n.zw)(new Date(e.time).toUTCString()),1)):(0,o.kq)("",!0),e.level?((0,o.wg)(),(0,o.iD)("code",Q,(0,n.zw)(e.level),1)):(0,o.kq)("",!0),(0,o._)("code",{innerHTML:r(e),class:(0,n.C_)(s(e))},null,10,U)],2)))),128))],512)])),_:1})}}});var x=l(7704);const A=P,C=A;g()(P,"components",{QScrollArea:x.Z});var j=l(1768),S=function(e,t,l,o){function n(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function u(e){try{r(o.next(e))}catch(t){a(t)}}function i(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?l(e.value):n(e.value).then(u,i)}r((o=o.apply(e,t||[])).next())}))};const z=(0,o.Uk)("没有群"),H=(0,o.Uk)("没有好友"),V=(0,o.aZ)({props:{uin:{type:Number,required:!0}},setup(e){const t=e,l=(0,a.iH)("group"),u=(0,a.iH)(),i=(0,a.iH)([]),r=(0,a.iH)(),s=(0,a.iH)([]),c=(0,a.iH)();function d(){return S(this,void 0,void 0,(function*(){const{data:e}=yield j.api.accountApiApiUinApiPost(t.uin,"get_group_list",{no_cache:!0});return e}))}function p(){return S(this,void 0,void 0,(function*(){const{data:e}=yield j.api.accountApiApiUinApiPost(t.uin,"get_friend_list",{no_cache:!0});return e}))}function v(e,l){return S(this,void 0,void 0,(function*(){const{data:o}=yield j.api.accountApiApiUinApiPost(t.uin,"send_msg",Object.assign({message:e},l));return o}))}return(e,t)=>{const a=(0,o.up)("q-tab"),m=(0,o.up)("q-tabs"),f=(0,o.up)("q-separator"),w=(0,o.up)("q-img"),_=(0,o.up)("q-avatar"),g=(0,o.up)("q-item-section"),h=(0,o.up)("q-item-label"),y=(0,o.up)("q-item"),W=(0,o.up)("q-select"),q=(0,o.up)("q-btn"),k=(0,o.up)("q-tab-panel"),b=(0,o.up)("q-tab-panels"),Z=(0,o.up)("q-input"),Q=(0,o.up)("q-card-section"),U=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),"active-color":"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{name:"group",label:"群聊",icon:"groups"}),(0,o.Wm)(a,{name:"friend",label:"好友",icon:"chat"})])),_:1},8,["modelValue"]),(0,o.Wm)(f),(0,o.Wm)(b,{modelValue:l.value,"onUpdate:modelValue":t[7]||(t[7]=e=>l.value=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{name:"group",class:"row justify-evenly"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{class:"col-8",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),filled:"",onFilter:t[2]||(t[2]=(e,t,l)=>d().then((e=>t((()=>i.value=e))))),options:i.value,"option-label":"group_name","option-value":"group_id",label:"选择群聊","map-options":"","emit-value":""},{option:(0,o.w5)((e=>[(0,o.Wm)(y,(0,n.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{src:`http://p.qlogo.cn/gh/${e.opt.group_id}/${e.opt.group_id}/100/`},null,8,["src"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.group_name),1)])),_:2},1024),(0,o.Wm)(h,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.group_id),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"text-grey"},{default:(0,o.w5)((()=>[z])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,o.Wm)(q,{class:"col-2",flat:"",icon:"send",color:"indigo",disable:!(u.value&&r.value),onClick:t[3]||(t[3]=e=>v(u.value,{group_id:r.value}).then((()=>{u.value=void 0})))},null,8,["disable"])])),_:1}),(0,o.Wm)(k,{name:"friend",class:"row justify-evenly"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{class:"col-8",modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),filled:"",onFilter:t[5]||(t[5]=(e,t,l)=>p().then((e=>t((()=>s.value=e))))),options:s.value,"option-label":"nickname","option-value":"user_id",label:"选择好友","map-options":"","emit-value":""},{option:(0,o.w5)((e=>[(0,o.Wm)(y,(0,n.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{src:`https://q1.qlogo.cn/g?b=qq&nk=${e.opt.user_id}&s=640`},null,8,["src"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.nickname),1)])),_:2},1024),(0,o.Wm)(h,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.user_id),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"text-grey"},{default:(0,o.w5)((()=>[H])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,o.Wm)(q,{class:"col-2",flat:"",icon:"send",color:"deep-orange",disable:!(u.value&&c.value),onClick:t[6]||(t[6]=e=>v(u.value,{user_id:c.value}).then((()=>{u.value=void 0})))},null,8,["disable"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{modelValue:u.value,"onUpdate:modelValue":t[8]||(t[8]=e=>u.value=e),style:{height:"15vh"},autogrow:"",outlined:"",label:"消息正文",rules:[e=>!!String(e).trim()||"请输入消息正文"]},null,8,["modelValue","rules"])])),_:1})])),_:1})}}});var I=l(151),D=l(7547),T=l(3269),J=l(5869),L=l(5906),F=l(6602),$=l(7757),B=l(3414),M=l(2035),Y=l(4027),E=l(2350),N=l(8240),O=l(5589),G=l(4842);const K=V,R=K;g()(V,"components",{QCard:I.Z,QTabs:D.Z,QTab:T.Z,QSeparator:J.Z,QTabPanels:L.Z,QTabPanel:F.Z,QSelect:$.Z,QItem:B.Z,QItemSection:M.Z,QAvatar:w.Z,QImg:Y.Z,QItemLabel:E.Z,QBtn:N.Z,QCardSection:O.Z,QInput:G.Z});var X=l(8825),ee=l(9582),te=function(e,t,l,o){function n(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function u(e){try{r(o.next(e))}catch(t){a(t)}}function i(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?l(e.value):n(e.value).then(u,i)}r((o=o.apply(e,t||[])).next())}))};const le={class:"row col-12 col-md-4"},oe=(0,o._)("div",{class:"text-h5 q-px-md"},"进程状态",-1),ne={key:1},ae=(0,o._)("strong",null,"退出代码:",-1),ue={class:"row justify-center"},ie=(0,o.Uk)(" 日志条数"),re=(0,o.Uk)(" 重启次数"),se=(0,o.Uk)(" 显示登录二维码 "),ce=(0,o.Uk)("刷新"),de=(0,o.Uk)("停止"),pe=(0,o.Uk)("启动"),ve=(0,o._)("div",{class:"text-body1 text-grey"},[(0,o._)("strong",null,"进程日志")],-1),me=(0,o.aZ)({setup(e){const t=(0,X.Z)(),l=(0,ee.yj)(),u=(0,a.iH)(+l.params.uin),i=(0,a.iH)(),r=(0,a.iH)([]);let s;function c(){return te(this,void 0,void 0,(function*(){null===s||void 0===s||s.send("heartbeat");try{t.loadingBar.start();const{data:e}=yield j.api.processStatusApiUinProcessStatusGet(u.value);i.value=e}catch(e){console.error(e)}finally{t.loadingBar.stop()}}))}function d(){return te(this,void 0,void 0,(function*(){try{t.loading.show(),yield j.api.processStopApiUinProcessDelete(u.value),yield c()}catch(e){console.error(e)}finally{t.loading.hide()}}))}function p(){return te(this,void 0,void 0,(function*(){try{t.loading.show(),yield j.api.processStartApiUinProcessPut(u.value),yield c()}catch(e){console.error(e)}finally{t.loading.hide()}}))}function v(){return te(this,void 0,void 0,(function*(){try{const{data:e}=yield j.api.processLogsHistoryApiUinProcessLogsGet(u.value);r.value=e}catch(e){console.error(e)}}))}function m(){if(null===s||void 0===s||s.close(),!Number.isInteger(u))return;const e=new URL(`api/${u.value}/process/logs`,location.href);e.protocol="https:"===e.protocol?"wss:":"ws:",s=new WebSocket(e.href),s.onmessage=({data:e})=>{const t=JSON.parse(e);r.value.push(t)},s.onclose=()=>{s=void 0}}const f=window.setInterval((()=>{c()}),3e3);return(0,o.YP)((()=>l.params),(()=>te(this,void 0,void 0,(function*(){u.value=+l.params.uin,i.value=void 0,r.value=[];try{t.loading.show(),yield c(),yield v(),m()}finally{t.loading.hide()}}))),{immediate:!0}),(0,o.Jd)((()=>{window.clearInterval(f),null===s||void 0===s||s.close()})),c(),(e,t)=>{const l=(0,o.up)("q-img"),a=(0,o.up)("q-avatar"),s=(0,o.up)("q-icon"),v=(0,o.up)("q-chip"),m=(0,o.up)("q-card-section"),f=(0,o.up)("q-separator"),w=(0,o.up)("q-popup-proxy"),_=(0,o.up)("q-btn"),g=(0,o.up)("q-slide-transition"),h=(0,o.up)("q-card-actions"),W=(0,o.up)("q-card"),q=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(q,{class:"row q-pa-md justify-center"},{default:(0,o.w5)((()=>[(0,o._)("div",le,[(0,o.Wm)(W,{class:"col-12 shadow"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"q-pa-md row items-center justify-start"},{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{src:`https://q1.qlogo.cn/g?b=qq&nk=${u.value}&s=640`},null,8,["src"])])),_:1}),oe,(0,o.Wm)(v,{color:"green"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"person"}),(0,o.Uk)("帐号: "+(0,n.zw)(u.value),1)])),_:1})])),_:1}),(0,o.Wm)(f),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[i.value?((0,o.wg)(),(0,o.j4)(m,{key:0,class:"row justify-center items-center"},{default:(0,o.w5)((()=>["pid"in i.value.details?((0,o.wg)(),(0,o.j4)(y,{key:0,status:i.value.details},null,8,["status"])):((0,o.wg)(),(0,o.iD)("div",ne,[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{icon:"error",color:"red","text-color":"white"}),ae,(0,o._)("code",null,(0,n.zw)(i.value.details.code),1)])),_:1})])),(0,o._)("div",ue,[(0,o.Wm)(v,{outline:"",color:"green"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"description",color:"accent"}),ie,(0,o._)("code",null,(0,n.zw)(i.value.total_logs)+"条",1)])),_:1}),(0,o.Wm)(v,{outline:"",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"restart_alt",color:"accent"}),re,(0,o._)("code",null,(0,n.zw)(i.value.restarts)+"次",1)])),_:1})]),i.value.qr_uri?((0,o.wg)(),(0,o.j4)(g,{key:2,class:"q-ma-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{push:"",icon:"qr_code",color:"accent"},{default:(0,o.w5)((()=>[se,(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{width:"40vh",src:i.value.qr_uri},null,8,["src"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(f),(0,o.Wm)(h,{class:"justify-center"},{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(_,{flat:"",color:"primary",icon:"refresh",onClick:c},{default:(0,o.w5)((()=>[ce])),_:1}),"running"==(null===(e=i.value)||void 0===e?void 0:e.status)?((0,o.wg)(),(0,o.j4)(_,{key:0,flat:"",color:"red",icon:"stop",onClick:d},{default:(0,o.w5)((()=>[de])),_:1})):((0,o.wg)(),(0,o.j4)(_,{key:1,flat:"",color:"green",icon:"play_arrow",onClick:p},{default:(0,o.w5)((()=>[pe])),_:1}))]})),_:1})])),_:1}),(0,o.Wm)(R,{class:"col-12 shadow",uin:u.value},null,8,["uin"])]),(0,o.Wm)(W,{class:"col-12 col-md-8 q-pa-md"},{default:(0,o.w5)((()=>[ve,(0,o.Wm)(f,{spaced:""}),(0,o.Wm)(C,{logs:r.value},null,8,["logs"])])),_:1})])),_:1})}}});var fe=l(4379),we=l(2471),_e=l(3944),ge=l(9367);const he=me,ye=he;g()(me,"components",{QPage:fe.Z,QCard:I.Z,QCardSection:O.Z,QAvatar:w.Z,QImg:Y.Z,QChip:f.Z,QIcon:m.Z,QSeparator:J.Z,QSlideTransition:we.Z,QBtn:N.Z,QPopupProxy:_e.Z,QCardActions:ge.Z})}}]);
//# sourceMappingURL=144.48af6349.js.map